# Generated by Haxe 4.0.0-rc.2+77068e10c
# Hail to Mighty CRAXE!!!

{.experimental: "codeReordering".}

import nimboot
import asynchttpserver
import asyncdispatch

type 
    HtmlMacro = ref object of HaxeObject

    HtmlMacroStatic = object of HaxeObject

    HttpServer = ref object of HaxeObject

    HttpServerStatic = object of HaxeObject


let HtmlMacroStaticInst = HtmlMacroStatic()
let HttpServerStaticInst = HttpServerStatic()

proc `$`(this:HtmlMacro) : string {.inline.} = 
    result = "HtmlMacro" & $this[]

proc main(this:HttpServerStatic) : void =
    var httpServer = newAsyncHttpServer()
    discard httpServer.serve(Port(26301), 
        proc(req:Request):Future[void] = 
            return req.respond(HttpCode(200), """<html>
					<body>
						<h1>Hello world!!!</h1>
					</body>
				</html>""")
    )
    runForever()

proc `$`(this:HttpServer) : string {.inline.} = 
    result = "HttpServer" & $this[]

HttpServerStaticInst.main()