// Generated by Haxe 4.0.0-rc.2+175840a

#pragma warning disable 109, 114, 219, 429, 168, 162
public class Operation : global::haxe.lang.Enum {
	
	protected Operation(int index) : base(index) {
	}
	
	
	public static global::Operation Inc(int v) {
		return new global::Operation_Inc(v);
	}
	
	
	public static global::Operation Move(int v) {
		return new global::Operation_Move(v);
	}
	
	
	public static readonly global::Operation Print = new global::Operation_Print();
	
	public static global::Operation Loop(global::Array<object> v) {
		return new global::Operation_Loop(v);
	}
	
	
}



#pragma warning disable 109, 114, 219, 429, 168, 162
public sealed class Operation_Inc : global::Operation {
	
	public Operation_Inc(int v) : base(0) {
		this.v = v;
	}
	
	
	public override global::Array<object> getParams() {
		return new global::Array<object>(new object[]{this.v});
	}
	
	
	public override string getTag() {
		return "Inc";
	}
	
	
	public override int GetHashCode() {
		return global::haxe.lang.Enum.paramsGetHashCode(0, new object[]{this.v});
	}
	
	
	public override bool Equals(object other) {
		if (global::System.Object.ReferenceEquals(((object) (this) ), ((object) (other) ))) {
			return true;
		}
		
		global::Operation_Inc en = ( other as global::Operation_Inc );
		if (( en == null )) {
			return false;
		}
		
		if ( ! (global::Type.enumEq<object>(((object) (this.v) ), ((object) (en.v) ))) ) {
			return false;
		}
		
		return true;
	}
	
	
	public override string toString() {
		return global::haxe.lang.Enum.paramsToString("Inc", new object[]{this.v});
	}
	
	
	public readonly int v;
	
}



#pragma warning disable 109, 114, 219, 429, 168, 162
public sealed class Operation_Move : global::Operation {
	
	public Operation_Move(int v) : base(1) {
		this.v = v;
	}
	
	
	public override global::Array<object> getParams() {
		return new global::Array<object>(new object[]{this.v});
	}
	
	
	public override string getTag() {
		return "Move";
	}
	
	
	public override int GetHashCode() {
		unchecked {
			return global::haxe.lang.Enum.paramsGetHashCode(1, new object[]{this.v});
		}
	}
	
	
	public override bool Equals(object other) {
		if (global::System.Object.ReferenceEquals(((object) (this) ), ((object) (other) ))) {
			return true;
		}
		
		global::Operation_Move en = ( other as global::Operation_Move );
		if (( en == null )) {
			return false;
		}
		
		if ( ! (global::Type.enumEq<object>(((object) (this.v) ), ((object) (en.v) ))) ) {
			return false;
		}
		
		return true;
	}
	
	
	public override string toString() {
		return global::haxe.lang.Enum.paramsToString("Move", new object[]{this.v});
	}
	
	
	public readonly int v;
	
}



#pragma warning disable 109, 114, 219, 429, 168, 162
public sealed class Operation_Print : global::Operation {
	
	public Operation_Print() : base(2) {
	}
	
	
	public override string getTag() {
		return "Print";
	}
	
	
}



#pragma warning disable 109, 114, 219, 429, 168, 162
public sealed class Operation_Loop : global::Operation {
	
	public Operation_Loop(global::Array<object> v) : base(3) {
		this.v = v;
	}
	
	
	public override global::Array<object> getParams() {
		return new global::Array<object>(new object[]{this.v});
	}
	
	
	public override string getTag() {
		return "Loop";
	}
	
	
	public override int GetHashCode() {
		unchecked {
			return global::haxe.lang.Enum.paramsGetHashCode(3, new object[]{this.v});
		}
	}
	
	
	public override bool Equals(object other) {
		if (global::System.Object.ReferenceEquals(((object) (this) ), ((object) (other) ))) {
			return true;
		}
		
		global::Operation_Loop en = ( other as global::Operation_Loop );
		if (( en == null )) {
			return false;
		}
		
		if ( ! (global::Type.enumEq<object>(((object) (this.v) ), ((object) (en.v) ))) ) {
			return false;
		}
		
		return true;
	}
	
	
	public override string toString() {
		return global::haxe.lang.Enum.paramsToString("Loop", new object[]{this.v});
	}
	
	
	public readonly global::Array<object> v;
	
}



#pragma warning disable 109, 114, 219, 429, 168, 162
public class Tape : global::haxe.lang.HxObject {
	
	public Tape(global::haxe.lang.EmptyObject empty) {
	}
	
	
	public Tape() {
		global::Tape.__hx_ctor__Tape(this);
	}
	
	
	protected static void __hx_ctor__Tape(global::Tape __hx_this) {
		unchecked {
			__hx_this.pos = 0;
			__hx_this.tape = global::haxe.io.Bytes.alloc(30000);
		}
	}
	
	
	public int pos;
	
	public global::haxe.io.Bytes tape;
	
	public int @get() {
		return ((int) (this.tape.b[this.pos]) );
	}
	
	
	public void inc(int x) {
		int b = ((int) (this.tape.b[this.pos]) );
		b += x;
		this.tape.b[this.pos] = ((byte) (b) );
	}
	
	
	public void move(int x) {
		unchecked {
			this.pos += x;
			while (( this.pos >= this.tape.length )) {
				this.tape = global::haxe.io.Bytes.alloc(( this.tape.length * 2 ));
			}
			
		}
	}
	
	
	public override double __hx_setField_f(string field, int hash, double @value, bool handleProperties) {
		unchecked {
			switch (hash) {
				case 5594516:
				{
					this.pos = ((int) (@value) );
					return @value;
				}
				
				
				default:
				{
					return base.__hx_setField_f(field, hash, @value, handleProperties);
				}
				
			}
			
		}
	}
	
	
	public override object __hx_setField(string field, int hash, object @value, bool handleProperties) {
		unchecked {
			switch (hash) {
				case 1291238562:
				{
					this.tape = ((global::haxe.io.Bytes) (@value) );
					return @value;
				}
				
				
				case 5594516:
				{
					this.pos = ((int) (global::haxe.lang.Runtime.toInt(@value)) );
					return @value;
				}
				
				
				default:
				{
					return base.__hx_setField(field, hash, @value, handleProperties);
				}
				
			}
			
		}
	}
	
	
	public override object __hx_getField(string field, int hash, bool throwErrors, bool isCheck, bool handleProperties) {
		unchecked {
			switch (hash) {
				case 1214309137:
				{
					return ((global::haxe.lang.Function) (new global::haxe.lang.Closure(this, "move", 1214309137)) );
				}
				
				
				case 5246174:
				{
					return ((global::haxe.lang.Function) (new global::haxe.lang.Closure(this, "inc", 5246174)) );
				}
				
				
				case 5144726:
				{
					return ((global::haxe.lang.Function) (new global::haxe.lang.Closure(this, "get", 5144726)) );
				}
				
				
				case 1291238562:
				{
					return this.tape;
				}
				
				
				case 5594516:
				{
					return this.pos;
				}
				
				
				default:
				{
					return base.__hx_getField(field, hash, throwErrors, isCheck, handleProperties);
				}
				
			}
			
		}
	}
	
	
	public override double __hx_getField_f(string field, int hash, bool throwErrors, bool handleProperties) {
		unchecked {
			switch (hash) {
				case 5594516:
				{
					return ((double) (this.pos) );
				}
				
				
				default:
				{
					return base.__hx_getField_f(field, hash, throwErrors, handleProperties);
				}
				
			}
			
		}
	}
	
	
	public override object __hx_invokeField(string field, int hash, object[] dynargs) {
		unchecked {
			switch (hash) {
				case 1214309137:
				{
					this.move(((int) (global::haxe.lang.Runtime.toInt(dynargs[0])) ));
					break;
				}
				
				
				case 5246174:
				{
					this.inc(((int) (global::haxe.lang.Runtime.toInt(dynargs[0])) ));
					break;
				}
				
				
				case 5144726:
				{
					return this.@get();
				}
				
				
				default:
				{
					return base.__hx_invokeField(field, hash, dynargs);
				}
				
			}
			
			return null;
		}
	}
	
	
	public override void __hx_getFields(global::Array<object> baseArr) {
		baseArr.push("tape");
		baseArr.push("pos");
		base.__hx_getFields(baseArr);
	}
	
	
}



#pragma warning disable 109, 114, 219, 429, 168, 162
public class Program : global::haxe.lang.HxObject {
	
	public Program(global::haxe.lang.EmptyObject empty) {
	}
	
	
	public Program(string text) {
		global::Program.__hx_ctor__Program(this, text);
	}
	
	
	protected static void __hx_ctor__Program(global::Program __hx_this, string text) {
		__hx_this.pos = 0;
		__hx_this.text = text;
		__hx_this.ops = __hx_this.parse();
	}
	
	
	public string text;
	
	public global::Array<object> ops;
	
	public int pos;
	
	public virtual global::Array<object> parse() {
		unchecked {
			global::Array<object> res = new global::Array<object>();
			while (( this.pos < this.text.Length )) {
				string c = global::haxe.lang.StringExt.charAt(this.text, this.pos);
				this.pos += 1;
				switch (c) {
					case "+":
					{
						res.push(global::Operation.Inc(1));
						break;
					}
					
					
					case "-":
					{
						res.push(global::Operation.Inc(-1));
						break;
					}
					
					
					case ".":
					{
						res.push(global::Operation.Print);
						break;
					}
					
					
					case "<":
					{
						res.push(global::Operation.Move(-1));
						break;
					}
					
					
					case ">":
					{
						res.push(global::Operation.Move(1));
						break;
					}
					
					
					case "[":
					{
						res.push(global::Operation.Loop(this.parse()));
						break;
					}
					
					
					case "]":
					{
						return res;
					}
					
					
				}
				
			}
			
			return res;
		}
	}
	
	
	public virtual void runInternal(global::Array<object> operations, global::Tape tape) {
		unchecked {
			int _g = 0;
			while (( _g < operations.length )) {
				global::Operation op = ((global::Operation) (operations[_g]) );
				 ++ _g;
				switch (op._hx_index) {
					case 0:
					{
						int v = ( op as global::Operation_Inc ).v;
						{
							int b = ((int) (tape.tape.b[tape.pos]) );
							b += v;
							tape.tape.b[tape.pos] = ((byte) (b) );
						}
						
						break;
					}
					
					
					case 1:
					{
						int v1 = ( op as global::Operation_Move ).v;
						{
							tape.pos += v1;
							while (( tape.pos >= tape.tape.length )) {
								tape.tape = global::haxe.io.Bytes.alloc(( tape.tape.length * 2 ));
							}
							
						}
						
						break;
					}
					
					
					case 2:
					{
						global::haxe.Log.trace.__hx_invoke2_o(((double) (((int) (tape.tape.b[tape.pos]) )) ), global::haxe.lang.Runtime.undefined, default(double), new global::haxe.lang.DynamicObject(new int[]{302979532, 1547539107, 1648581351}, new object[]{"runInternal", "Program", "src/BrainFuck.hx"}, new int[]{1981972957}, new double[]{((double) (79) )}));
						break;
					}
					
					
					case 3:
					{
						global::Array<object> v2 = ( op as global::Operation_Loop ).v;
						while (( ((int) (tape.tape.b[tape.pos]) ) > 0 )) {
							this.runInternal(v2, tape);
						}
						
						break;
					}
					
					
				}
				
			}
			
		}
	}
	
	
	public virtual void run() {
		this.runInternal(this.ops, new global::Tape());
	}
	
	
	public override double __hx_setField_f(string field, int hash, double @value, bool handleProperties) {
		unchecked {
			switch (hash) {
				case 5594516:
				{
					this.pos = ((int) (@value) );
					return @value;
				}
				
				
				default:
				{
					return base.__hx_setField_f(field, hash, @value, handleProperties);
				}
				
			}
			
		}
	}
	
	
	public override object __hx_setField(string field, int hash, object @value, bool handleProperties) {
		unchecked {
			switch (hash) {
				case 5594516:
				{
					this.pos = ((int) (global::haxe.lang.Runtime.toInt(@value)) );
					return @value;
				}
				
				
				case 5545010:
				{
					this.ops = ((global::Array<object>) (global::Array<object>.__hx_cast<object>(((global::Array) (@value) ))) );
					return @value;
				}
				
				
				case 1291439277:
				{
					this.text = global::haxe.lang.Runtime.toString(@value);
					return @value;
				}
				
				
				default:
				{
					return base.__hx_setField(field, hash, @value, handleProperties);
				}
				
			}
			
		}
	}
	
	
	public override object __hx_getField(string field, int hash, bool throwErrors, bool isCheck, bool handleProperties) {
		unchecked {
			switch (hash) {
				case 5695307:
				{
					return ((global::haxe.lang.Function) (new global::haxe.lang.Closure(this, "run", 5695307)) );
				}
				
				
				case 1794624936:
				{
					return ((global::haxe.lang.Function) (new global::haxe.lang.Closure(this, "runInternal", 1794624936)) );
				}
				
				
				case 1029017651:
				{
					return ((global::haxe.lang.Function) (new global::haxe.lang.Closure(this, "parse", 1029017651)) );
				}
				
				
				case 5594516:
				{
					return this.pos;
				}
				
				
				case 5545010:
				{
					return this.ops;
				}
				
				
				case 1291439277:
				{
					return this.text;
				}
				
				
				default:
				{
					return base.__hx_getField(field, hash, throwErrors, isCheck, handleProperties);
				}
				
			}
			
		}
	}
	
	
	public override double __hx_getField_f(string field, int hash, bool throwErrors, bool handleProperties) {
		unchecked {
			switch (hash) {
				case 5594516:
				{
					return ((double) (this.pos) );
				}
				
				
				default:
				{
					return base.__hx_getField_f(field, hash, throwErrors, handleProperties);
				}
				
			}
			
		}
	}
	
	
	public override object __hx_invokeField(string field, int hash, object[] dynargs) {
		unchecked {
			switch (hash) {
				case 5695307:
				{
					this.run();
					break;
				}
				
				
				case 1794624936:
				{
					this.runInternal(((global::Array<object>) (global::Array<object>.__hx_cast<object>(((global::Array) (dynargs[0]) ))) ), ((global::Tape) (dynargs[1]) ));
					break;
				}
				
				
				case 1029017651:
				{
					return this.parse();
				}
				
				
				default:
				{
					return base.__hx_invokeField(field, hash, dynargs);
				}
				
			}
			
			return null;
		}
	}
	
	
	public override void __hx_getFields(global::Array<object> baseArr) {
		baseArr.push("pos");
		baseArr.push("ops");
		baseArr.push("text");
		base.__hx_getFields(baseArr);
	}
	
	
}



#pragma warning disable 109, 114, 219, 429, 168, 162
public class BrainFuck : global::haxe.lang.HxObject {
	
	public static void Main(){
		global::cs.Boot.init();
		{
			global::BrainFuck.main();
		}
	}
	public BrainFuck(global::haxe.lang.EmptyObject empty) {
	}
	
	
	public BrainFuck() {
		global::BrainFuck.__hx_ctor__BrainFuck(this);
	}
	
	
	protected static void __hx_ctor__BrainFuck(global::BrainFuck __hx_this) {
	}
	
	
	public static void main() {
		string text = global::sys.io.File.getContent("code.b");
		global::Program program = new global::Program(((string) (text) ));
		program.run();
	}
	
	
}


